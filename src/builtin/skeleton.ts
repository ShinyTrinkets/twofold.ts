/*
 * A cute, but useless skeleton animation.
 */

import { parseNumber } from './common.ts';

const mrSkeleton = `

            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=. //
       (@   (_=_)//
        |   |! !:)
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=. //
       (@   (_=_)//
        |   |! !:)
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (-.-)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=. ||
       (@   (_=_) ||
        |   |! !| ;:
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=.  \\
       (@   (_=_)   \\
        |   |! !|    (:
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=.  ===(:
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___    (:
          //.=|=.\\  //
         // .=|=. \\//
        //  .=|=.  \/
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======:)
            (●.●)  \\
             |=|   //
           ___|___//
          //.=|=. /
         // .=|=.
        //  .=|=.
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


             _____
             |***|
             |***|
            =======:)
             .-.   ||
            (●.●)  ||
             |-|   //
           ___|___//
          //.=|=. /
         // .=|=.
        //  .=|=.
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


               _____
               |***|
               |***|
              =======:)
             .-.     //
     GOOD   (●.●)   //
   EVENING!  |=|   //
           ___|___//
          //.=|=. /
         // .=|=.
        //  .=|=.
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


               _____
               |***|
               |***|
              =======:)
             .-.     //
     GOOD   (●.●)   //
   EVENING!  |-|   //
           ___|___//
          //.=|=. /
         // .=|=.
        //  .=|=.
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


               _____
               |***|
               |***|
              =======:)
             .-.     //
     GOOD   (●.●)   //
   EVENING!  |=|   //
           ___|___//
          //.=|=. /
         // .=|=.
        //  .=|=.
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


               _____
               |***|
               |***|
              =======:)
             .-.     //
            (●.●)   //
             |=|   //
           ___|___//
          //.=|=. /
         // .=|=.
        //  .=|=.
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


             _____
             |***|
             |***|
            =======:)
             .-.   ||
            (●.●)  ||
             |=|   //
           ___|___//
          //.=|=. /
         // .=|=.
        //  .=|=.
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======:)
            (-.-)  \\
             |=|   //
           ___|___//
          //.=|=. /
         // .=|=.
        //  .=|=.
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___    (:
          //.=|=.\\  //
         // .=|=. \\//
        //  .=|=.  \/
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=.  ===(:
       (@   (_=_)
        |   |! !|
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=.  \\
       (@   (_=_)   \\
        |   |! !|    (:
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=. ||
       (@   (_=_) ||
        |   |! !| ;:
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=. //
       (@   (_=_)//
        |   |! !:)
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==


            _____
            |***|
            |***|
           =======
            (●.●)
             |=|
           ___|___
          //.=|=.\\
         // .=|=. \\
        //  .=|=. //
       (@   (_=_)//
        |   |! !:)
        |   || ||
        |   () ()
        |   || ||
        |   || ||
        "  ==' '==
`
  .split('\n\n')
  .map(s => s.replace(/^\n+/, ''))
  .filter(s => s !== '');

export function skeleton(_s: string, args: any, meta: any) {
  /**
   * Draws a cute skeleton, frame by frame.
   * Demonstrates how to create a tag with animations,
   * and how to use the meta object to modify the tree.
   * Example:
   * <skeleton n=99></skeleton>
   */
  if (args.n === undefined || args.n === null) {
    return;
  }

  args.n = parseNumber(args.n);
  if (isNaN(args.n) || args.n < 1) {
    return;
  }

  if (args.n > mrSkeleton.length) {
    args.n = mrSkeleton.length;
  }

  args.n--;
  meta.node.params.n = args.n;
  if (!meta.node.children) {
    meta.node.children = [{}];
  }

  meta.node.children[0].rawText = `\n${mrSkeleton[args.n]}\n`;
  return meta.node;
}
